<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">

<style>
    .selected {
        color: red;
        font-family: 'Creepster', cursive;
    }

    div,
    p {
        font-family: 'Creepster', cursive;
        color: blue;
    }
</style>

<div>
    <div class="selected"> moves </div>
    <div> items </div>
</div>

<script>

    let flamethrower = {
        name: "Flamethrower",
        type: "fire",
        effect: function(attacker, defender) {
            defender.temp.hp -= calcSpecialDamage(attacker, defender, 80)
        },
        accuracy: 100,
        pp: 15,
    }

    let calcPhysicalDamage = function(attacker, defender, attackPower) {
        let attackStat = attacker.attack * attacker.temp.attack
        let defenseStat = defender.defense * defender.temp.defense
        let randomNumber = 85 // TODO randomize between 85 and 100
        let STAB = 1.0 // TODO calculate stab
        let weakness = 1.0 // TODO
        let resistance = 1.0 // TODO
        return ((((2 * attacker.level / 5 + 2) * attackStat * attackPower / defenseStat) / 50) + 2) * STAB * weakness / resistance * randomNumber / 100
    }

    let calcSpecialDamage = function(attacker, defender, attackPower) {
        let attackStat = attacker.spAttack * attacker.temp.spAttack
        let defenseStat = defender.spDefense * defender.temp.spDefense
        let randomNumber = 85 // TODO randomize between 85 and 100
        let STAB = 1.0 // TODO calculate stab
        let weakness = 1.0 // TODO
        let resistance = 1.0 // TODO
        return ((((2 * attacker.level / 5 + 2) * attackStat * attackPower / defenseStat) / 50) + 2) * STAB * weakness / resistance * randomNumber / 100
    }

    let dragonClaw = {
        name: "Dragon Claw",
        type: "dragon",
        category: "attack",
        effect: function(attacker, defender) {
            defender.temp.hp -= calcPhysicalDamage(attacker, defender, 80)
        },
        accuracy: 100,
        pp: 15,
    }

    let smokescreen = {
        name: "Smokescreen",
        type: "normal",
        effect: function(attacker, defender) {
            if (defender.accuracy > 0.4) {
                defender.accuracy -= 0.1;
            }
        },
        accuracy: 100,
        pp: 15,
    }



    let shadowball = {
        name: "Shadow Ball",
        type: "ghost",
        effect: function(attacker, defender) {
            defender.temp.hp -= calcSpecialDamage(attacker, defender, 80)
        },
        accuracy: 100,
        pp: 15,
    }

    let temporaryStats = {
        hp: 200,
        acc: 100,
        evasiveness: 1.0,
        attack: 1.0,
        defense: 1.0,
        spAttack: 1.0,
        spDefense: 1.0,
        speed: 1.0,
    }

    let charizard = {
        name: "charizard",
        type: ["fire", "flying"],
        moves: [
           flamethrower,
           dragonClaw,
           smokescreen,
        ],
        hp: 78,
        attack: 84,
        defense: 78,
        spAttack: 109,
        spDefense: 85,
        speed: 100,
    }
    
    let gengar = {
        name: "gengar",
        type: ["ghost", "poison"],
        moves: [
            shadowball,
            smokescreen,
        ],
        hp: 60,
        attack: 65,
        defense: 60,
        spAttack: 130,
        spDefense: 75,
        speed: 110,
    }

    let teamA = [
        charizard,
    ]

    let startBattle = function (teamA, teamB) {
        let battle = {
            isFinished: false,
            teamA,
            teamB,
        }

        return battle 
    }

    // This is a comment, it doesn't do anything
    // let attack = function (damageAmount) {
    //     return "dealt " + damageDealt(pokemonC, pokemonB) + " damage"
    // }

    // let damageDealt = function (a, b) {
    //     return a.attack - b.defense
    // }

    // let pokemonAName = document.createElement("p")
    // pokemonAName.innerText = attack(pokemonA.attack)
    // document.body.appendChild(pokemonAName)

    // let pokemonBName = document.createElement("p")
    // pokemonBName.innerText = pokemonB.name + " " + pokemonB.hp
    // document.body.appendChild(pokemonBName)


</script>
<p> bulbasaur </p>